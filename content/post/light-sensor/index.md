---
title: M5StickCã§é›»æ°—æ¶ˆã—å¿˜ã‚Œã‚’LINEé€šçŸ¥ã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹ã‚’ä½œã£ã¦ã¿ãŸ
description: 
slug: light-sensor
date: 2022-07-23 00:00:00+0000
image: light.jpg
categories:
    - iot
tags:
    - 
---

ã“ã‚“ã°ã‚“ã¯ã€œğŸŒƒ  
å¤œå¯ã‚‹å‰ã«å¸ƒå›£ã«å…¥ã£ãŸç›´å¾Œã€  
ã€Œã‚ã€é›»æ°—æ¶ˆã—ãŸã£ã‘â€¦ã€  
ã£ã¦ãªã‚‹ã“ã¨ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿï¼  

ç„é–¢ã€æ´—é¢æ‰€ã€ãƒˆã‚¤ãƒ¬ã¨ã‹â€¦  
ã‚ã‚Œï¼Ÿã¤ã‘ã£ã±ãªã—ã‹ã‚‚â€¦ã¨æ°—ã«ãªã£ã¦å¯ã‚Œãªã„ã®ã§ä»•æ–¹ãªãèµ·ãä¸ŠãŒã£ã¦ç¢ºèªã—ã«è¡Œãã€‚  
ã“ã‚ŒãŒåœ°å‘³ã«é¢å€’ãªã‚“ã§ã™ã‚ˆã­ã€œã€‚  
ï¼ˆã“ã†ã„ã†ã®ã‚’æ€ã„å‡ºã™ã®ã£ã¦ãªã‚“ã§å¸ƒå›£ã«å…¥ã£ãŸå¾Œãªã‚“ã§ã—ã‚‡ã†ã€‚ã€‚ã›ã‚ã¦ç«‹ã¡ä¸ŠãŒã£ã¦ã‚‹æ™‚ã«æ€ã„å‡ºã›ã‚Œã°è¾›ããªã„ã®ã«â€¦ğŸ˜®â€ğŸ’¨ï¼‰  

ãã“ã§ã€é›»æ°—ã¤ã‘ã£ã±ãªã—ã‚’æ•™ãˆã¦ãã‚Œã‚‹IoTãƒ‡ãƒã‚¤ã‚¹ã‚’ä½œã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ğŸ’¡  
***
### ç”¨æ„ã—ãŸã‚‚ã®
- [M5StickC](https://www.switch-science.com/catalog/5517/)
- [GROVE å…‰ã‚»ãƒ³ã‚µ](https://www.switch-science.com/catalog/3284/)

### ä½œæˆå†…å®¹
- å…‰ã‚»ãƒ³ã‚µãƒ¼ã§ãƒ‡ãƒã‚¤ã‚¹ã‚’è¨­ç½®ã—ãŸéƒ¨å±‹ã®æ˜ã‹ã‚ŠãŒONã‹OFFã‹èªè­˜ã™ã‚‹ã€‚
- ONã®çŠ¶æ…‹ãŒï¼•åˆ†ä»¥ä¸Šç¶šã„ã¦ã„ãŸå ´åˆã€LINE Notifyã§é›»æ°—ä»˜ã‘ã£ã±ãªã—ã§ã‚ã‚‹æ—¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã€‚  

### å®Ÿè£…æ‰‹é †
#### M5StickCã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
ã¾ãšM5StickCã®[ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](https://docs.m5stack.com/en/quick_start/m5stickc/uiflow)ã‚’è¡Œã„ã¾ã™ã€‚  
ã“ã‚Œã§UIFlowã¨ã„ã†é–‹ç™ºç’°å¢ƒã¨ãƒ‡ãƒã‚¤ã‚¹æœ¬ä½“ã‚’æ¥ç¶šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
![](UIFlow1.png)  

#### LINE Notifyã®è¨­å®š
æ¬¡ã«ã€[LINE Notify](https://notify-bot.line.me/ja/)ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚ 
![](LINE_Notify.png) 
LINE Notifyã¯ã€Webã‚µãƒ¼ãƒ“ã‚¹ã¨é€£æºã—ã¦é€šçŸ¥ã‚’é€ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚   
ä¾‹ãˆã°ã€GitHubã¨é€£æºã—ã¦ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€šçŸ¥ã‚’é€ã£ãŸã‚Šã€ã‚µãƒ¼ãƒãƒ¼ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹ã®Mackerelã¨é€£æºã—ã¦ã‚µãƒ¼ãƒãƒ¼ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é€šçŸ¥ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
LINEã®ãƒ­ã‚°ã‚¤ãƒ³ã‚’ã—ã¦ã‹ã‚‰ãƒã‚¤ãƒšãƒ¼ã‚¸ã‚ˆã‚Šã€ã€Œã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡Œ(é–‹ç™ºè€…å‘ã‘)ã€ã‚’è¡Œã„ã¾ã™ã€‚  
ãƒˆãƒ¼ã‚¯ãƒ³åã¯"LINE Notify"ã¨ã—ã€é€šçŸ¥ã®é€ä¿¡å…ˆã¯è‡ªåˆ†å®›ã«ã—ãŸã‹ã£ãŸã®ã§ã€Œ1:1ã§LINE Notifyã‹ã‚‰é€šçŸ¥ã‚’å—ã‘å–ã‚‹ã€ã‚’é¸æŠã—ã¾ã—ãŸã€‚  
ç™ºè¡Œã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã¯ã‚ã¨ã§ä½¿ã†ã®ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãŠãã¾ã™ã€‚  

[LINE Notify API Document](https://notify-bot.line.me/doc/ja/)ã«ã€é€šçŸ¥ã‚’é€ã‚‹ãŸã‚ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆæ–¹æ³•ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚  
ä»Šå›ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚Šã¾ã™ã€‚
> ãƒ˜ãƒƒãƒ€ãƒ¼
| ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰/ãƒ˜ãƒƒãƒ€  |  å€¤  |
| :---: | :---: | 
|  Method  |  POST  | 
|  Content-Type  | application/x-www-form-urlencoded  | 
|  Authorization  |  	Bearer <access_token>  | 

> ãƒœãƒ‡ã‚£
| ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿  |  å€¤  |
| :---: | :---: | 
|ã€€message | é€šçŸ¥ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(urlã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãŸã‚‚ã®) | 



#### ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã
UIFlowã«æˆ»ã‚Šã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚  
UIFlowã§ã¯ã€Blocklyã¨ã„ã†ãƒ–ãƒ­ãƒƒã‚¯ã‚’çµ„ã¿ç«‹ã¦ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ããƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã€ç°¡å˜ã«ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ 
- ãƒ¡ã‚¤ãƒ³ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ   
1åˆ†ã”ã¨ã«sensor_valueãŒ200ã‚ˆã‚Šå¤§ãã„(ãƒ©ã‚¤ãƒˆãŒONã§ã‚ã‚‹)ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚å¤§ãã‘ã‚Œã°ON_loop_countsã‚’1å¢—ã‚„ã—ã¦ã„ãã€ON_loop_countsãŒï¼•ä»¥ä¸Šã«ãªã£ãŸã‚‰(ãƒ©ã‚¤ãƒˆONã®çŠ¶æ…‹ãŒ5åˆ†ä»¥ä¸Šç¶šã„ãŸã‚‰)sendMessageãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ãŒå‹•ãã¾ã™ã€‚
![](UIFlow_main.png) 
- sendMessage ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³  
POSTãƒ¡ã‚½ãƒƒãƒ‰ã§"https://notify-api.line.me/api/notify"ã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚Šã¾ã™ã€‚
![](UIFlow_func.png) 

### çµæœ
- ãƒ©ã‚¤ãƒˆONã®çŠ¶æ…‹ãŒ5åˆ†ä»¥ä¸Šç¶šã„ãŸã€ãƒ‡ãƒã‚¤ã‚¹ã®è¡¨ç¤ºã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ã¡ã‚‡ã£ã¨è¦‹ãˆã¥ã‚‰ã„ã®ã§ã™ãŒã€ä¸€è¡Œç›®ã¯"Light Status: ON"ã¨æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚ ![](device.JPG)
- é€šçŸ¥ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å±Šãã¾ã—ãŸï¼![](LINE_message.jpeg) 


### å•é¡Œç‚¹ã¨åçœ
çª“ã®ãªã„å€‹å®¤ãªã‚‰å•é¡Œãªã„ã®ã§ã™ãŒã€æ—¥ä¸­ã«è‡ªç„¶å…‰ãŒå…¥ã£ã¦ã—ã¾ã†å ´æ‰€ã ã¨ãƒ©ã‚¤ãƒˆãŒONã§ã‚ã‚‹ã¨èªè­˜ã—ã¦ã—ã¾ã„ã¾ã™ã€‚  
ã¾ãŸã€é€šçŸ¥ãŒæ¥ã¦ã‚‚çµå±€è‡ªåˆ†ã§æ¶ˆã—ã«è¡Œã‹ãªã„ã¨ã„ã‘ãªã„ã®ã§ã€æ¶ˆã—å¿˜ã‚Œé˜²æ­¢ã«ã¯ãªã‚Šã¾ã™ãŒä½œæ¥­ã®å‰Šæ¸›ã«ã¯ãªã‚Šã¾ã›ã‚“ğŸ˜°  
ã‚ˆã‚Šè‰¯ã„è§£æ±ºæ³•ã¨ã—ã¦ã€èµ¤å¤–ç·šã‚»ãƒ³ã‚µãƒ¼ã‚’ä½¿ã£ã¦äººã‚’æ„ŸçŸ¥ã—ãŸæ™‚ã ã‘é›»æ°—ã‚’ã¤ã‘ã‚‹ã‚ˆã†ã«ã—ãŸã»ã†ãŒã„ã„ã§ã™ã­ã€‚ã€‚  
ä»Šå›ã¯å…‰ã‚»ãƒ³ã‚µãƒ¼ã—ã‹æ‰‹å…ƒã«ãªã‹ã£ãŸã®ã§ã™ãŒã€ã¾ãŸä»–ã®ã‚»ãƒ³ã‚µãƒ¼ã‚’ä½¿ã£ã¦å°ã•ãªIoTãƒ‡ãƒã‚¤ã‚¹ã®é–‹ç™ºã«æŒ‘æˆ¦ã—ã¦ã¿ãŸã„ã§ã™ã€‚

***
### å‚è€ƒãƒªãƒ³ã‚¯
>- [UIFlow](https://m5stack.github.io/UIFlow_doc/ja/)
>- [ã€M5StickCã€‘ãƒ–ãƒ­ãƒƒã‚¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ˆUIFlowï¼‰ã§å‹•ä½œã•ã›ã‚‹ãŸã‚ã®ç’°å¢ƒã¥ãã‚Šï¼†ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ï¼](https://burariweb.info/electronic-work/m5stickc-uiflow-setting.html)
>- [M5Stackã§è¨ˆæ¸¬ã—ãŸæ¸©åº¦ãƒ‡ãƒ¼ã‚¿ã‚’LINEã«é€ä¿¡ã—ã¦ã¿ãŸ](https://craft-gogo.com/m5stack-line/#toc6)